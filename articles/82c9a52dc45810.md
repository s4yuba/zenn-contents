---
title: "Claude Codeã®å•é¡Œè§£æ±ºèƒ½åŠ›ã®åº•ä¸Šã’ã‚’è©¦ã¿ã‚‹ï¼šMCPã‚µãƒ¼ãƒãƒ¼ + subagents"
emoji: "ğŸ’«"
type: "tech"
topics:
  - "mcp"
  - "agent"
  - "claude"
  - "anthropic"
  - "claudecode"
published: true
published_at: "2025-06-14 11:30"
---

:::message
ã“ã®è¨˜äº‹ã¯ä¸»ã«äººåŠ›ã§ä½œæˆã•ã‚Œã¾ã—ãŸã€‚è¨˜äº‹ä½œæˆã«éš›ã—ã¦ä»¥ä¸‹ã®ä½œæ¥­ã®ã¿AIã§è¡Œã„ã¾ã—ãŸã€‚
ãƒ»æ–‡ç« ã®èª¤å­—è„±å­—ã®æ¤œçŸ¥
ãƒ»æƒ…å ±åé›†ï¼ˆå¼•ç”¨ãƒªãƒ³ã‚¯å…ˆã®æƒ…å ±ã¯è‡ªåˆ†ã§ç¢ºèªï¼‰
:::

:::message
ï¼ˆ2025/7/25æ›´æ–°ï¼‰
Claude Code v1.0.60ã‚ˆã‚Š[Sub agents](https://docs.anthropic.com/en/docs/claude-code/sub-agents)æ©Ÿèƒ½ãŒå®Ÿè£…ã•ã‚Œã¾ã—ãŸã€‚
ã“ã®è¨˜äº‹ã®å®Ÿè£…ãŒã‚ˆã‚Šç°¡å˜ã«ãªã£ãŸã¨æ€ã„ã¾ã™ã€‚
`/agents` ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€æœ€æ–°æƒ…å ±ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®Subagentsã‚’ä½œæˆã§ãã¾ã™ã€‚
:::

Oikonã§ã™ã€‚å¤–è³‡ITä¼æ¥­ã§ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’ã—ã¦ã„ã¾ã™ã€‚

Claude Codeã‚’è¶£å‘³ã®å€‹äººé–‹ç™ºã§ã‚‚æ—¥ã€…ä½¿ã£ã¦ã„ã¾ã™ãŒã€Webã‚¢ãƒ—ãƒªé–‹ç™ºã®éš›ã«ClaudeãŒãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ä¾å­˜ã™ã‚‹è¤‡é›‘ãªå•é¡Œã‚’è§£æ±ºã§ããªã„ã‚±ãƒ¼ã‚¹ãŒä½•å›ã‹ã‚ã‚Šã¾ã—ãŸã€‚

è©¦è¡ŒéŒ¯èª¤ã‚’ã—ãŸçµæœã€**Model Context Protocol (MCP)ã‚µãƒ¼ãƒãƒ¼ã‚’Claude CodeãŒä½¿ãˆã‚‹ã‚ˆã†ã«ã—ã¦ã‚ã’ã‚‹ã¨ã€ä»¥å‰ã‚ˆã‚Šã‚‚å•é¡Œè§£æ±ºèƒ½åŠ›ãŒä¸ŠãŒã£ãŸãŸã‚å…±æœ‰ã—ã¾ã™**ã€‚

@[tweet](https://x.com/gaishi_narou/status/1933133179763790227)


ä½¿ç”¨ã—ãŸMCPã‚µãƒ¼ãƒãƒ¼ï¼š
- **Context7**
- **Brave-Search**

ã©ã¡ã‚‰ã‚‚æœ‰åãªMCPã‚µãƒ¼ãƒãƒ¼ã§ç‰¹ã«æ–°ã—ã„ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ä»Šå›ã¯Claude Codeã«æ˜ç¤ºçš„ã«ä½¿ã£ã¦ã‚‚ã‚‰ã†ã“ã¨ã§Webã‚¢ãƒ—ãƒªã®å•é¡Œã‚’è§£æ±ºã—ã¦ã‚‚ã‚‰ã„ã¾ã—ãŸã€‚

ã“ã‚Œã«åŠ ãˆã¦ã€**ã‚«ã‚¹ã‚¿ãƒ ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã§subagentã«MCPã‚µãƒ¼ãƒãƒ¼ã‚’åˆ©ç”¨ã—ã¦ã‚‚ã‚‰ã†æ–¹æ³•ã‚‚è©¦ã—ã¦ã¿ã¾ã—ãŸ**ã€‚

ã™ã§ã«ã“ã‚Œã‚‰ã®MCPã‚µãƒ¼ãƒãƒ¼ã‚„subagentã‚’ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹æ–¹ã‚‚å¤šã„ã¨æ€ã„ã¾ã™ãŒã€ã“ã®è¨˜äº‹ã§ã¯æ”¹ã‚ã¦ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚

## Model Context Protocol (MCP)ã‚µãƒ¼ãƒãƒ¼
![](https://storage.googleapis.com/zenn-user-upload/77d299107477-20250610.png)

MCPã¯Anthropicç¤¾ãŒææ¡ˆã—ãŸAIã¨ãƒ„ãƒ¼ãƒ«ã‚’ç¹‹ããƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã™ã€‚

å¹³ãŸãè¨€ãˆã°ã€**AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå¤–éƒ¨ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®è¦æ ¼**ã§ã™ã€‚2025å¹´6æœˆç¾åœ¨ã§ã¯ã‹ãªã‚Šæ™®åŠã—ã¦ã„ã‚‹å°è±¡ã§ã€ä»Šå¾Œã®AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«æ¬ ã‹ã›ãªã„æŠ€è¡“ã¨ãªã£ã¦ã„ã¾ã™ã€‚

ä»Šå›ã¯MCPã«ã¤ã„ã¦æ·±ãè¸ã¿è¾¼ã¿ã¾ã›ã‚“ãŒã€ä¸Šã®å›³ã¨ç…§ã‚‰ã—åˆã‚ã›ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

* Host with MCP client = **Claude Code**
* MCP server A/C = **Context7 MCP server**
* MCP server C = **Brave-Search MCP server**

MCPã‚µãƒ¼ãƒãƒ¼ã«ã¤ã„ã¦ã€ãã‚Œãã‚Œç°¡å˜ã«è¦‹ã¦ã„ãã¾ã™ã€‚

### â‘  Context7 MCP

https://github.com/upstash/context7

Context7ã¯UpstashãŒé–‹ç™ºã—ãŸ**ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä»˜ãAPIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å–å¾—ã™ã‚‹MCPã‚µãƒ¼ãƒãƒ¼**ã§ã™ã€‚

Webé–‹ç™ºç¾å ´ã§ã¯æ—¥ã€…OSSãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒä¸ŠãŒã‚Šã€AIãƒ¢ãƒ‡ãƒ«ãŒæŒã£ã¦ã„ã‚‹æƒ…å ±ãŒå¤ã„ã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚Context7ã¯ãã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæƒ…å ±ã‚’æä¾›ã—ã¾ã™ã€‚

å…·ä½“çš„ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªä¾‹ã¯ã€ä»¥ä¸‹ã®ç”»åƒã®ã‚ˆã†ãªã‚‚ã®ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/bfbf05221e76-20250613.png)

ã“ã‚Œã‚‰ã¯[context7ã®ã‚µã‚¤ãƒˆ](https://context7.com/)ã§ã‚‚ç¢ºèªå¯èƒ½ã§ã™ã€‚è¦‹ã¦ã‚ã‹ã‚‹é€šã‚Šä¸€èˆ¬çš„ãªWebé–‹ç™ºã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæƒ…å ±ã¯å…¥ã£ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚

MCPã‚µãƒ¼ãƒãƒ¼ã®è¨­å®šæ–¹æ³•ã‚‚ç°¡å˜ã§ã™ã€‚ã“ã“ã§ã¯Claude Codeã§ã®ä¾‹ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

**Remote MCP Server for Claude Code**:
```bash
claude mcp add --transport sse context7 https://mcp.context7.com/sse
```

**Local MCP Server for Claude Code**:
```bash
claude mcp add context7 -- npx -y @upstash/context7-mcp
```

### â‘¡ Brave-Search MCP

https://github.com/modelcontextprotocol/servers-archived/tree/main/src/brave-search

Brave-Searchã¯**Webæ¤œç´¢ãƒ„ãƒ¼ãƒ«ã®MCPã‚µãƒ¼ãƒãƒ¼**ã§ã™ã€‚

Claude Codeã«ã‚‚Web Searchæ©Ÿèƒ½ãŒæ¨™æº–ã§ã¤ã„ã¦ã„ã¾ã™ãŒã€å€‹äººçš„ã«ã‚ã¾ã‚ŠåŠ¹æœã‚’æ„Ÿã˜ã«ãã‹ã£ãŸã®ã¨ã€å¾Œè¿°ã™ã‚‹subagentã«MCPãƒ„ãƒ¼ãƒ«ã®ä½¿ç”¨ã‚’é ¼ã¿ã‚„ã™ã‹ã£ãŸãŸã‚ã€Brave-Searchã‚’æœ€è¿‘ã¯ä½¿ã£ã¦ã¿ã¦ã„ã¾ã™ã€‚

ä½™è«‡ã§ã™ãŒã€Claude Codeã¯ãã‚‚ãã‚‚Brave-Searchã‚’å†…éƒ¨çš„ã«ä½¿ç”¨ã—ã¦ã„ã‚‹ã‚ˆã†ãªè©±ã‚‚[Tech Crunchã®è¨˜äº‹](https://techcrunch.com/2025/03/21/anthropic-appears-to-be-using-brave-to-power-web-searches-for-its-claude-chatbot/)ã«æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚

Freeãƒ—ãƒ©ãƒ³ã§ã¯æœˆé–“2,000ã‚¯ã‚¨ãƒªã¾ã§ä½¿ç”¨ã§ãã¾ã™ã€‚APIã‚­ãƒ¼ã¯[å…¬å¼ã‚µã‚¤ãƒˆ](https://brave.com/ja/search/api/)ã‹ã‚‰å–å¾—ã—ã¦ãã ã•ã„ã€‚

ç§ã¯Claude Desktopã®è¨­å®šã‹ã‚‰MCPã‚µãƒ¼ãƒãƒ¼è¨­å®šã‚’`claude mcp add-from-claude-desktop`ã§ç§»è¡Œã—ã¾ã—ãŸã€‚CLIã ã¨ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§Brave-Search MCPã‚µãƒ¼ãƒãƒ¼ã‚’è¿½åŠ ã§ãã‚‹ã¿ãŸã„ã§ã™ã€‚

```bash
claude mcp add brave-search -s user -- env BRAVE_API_KEY=`YOUR_API_KEY_HERE` npx -y @modelcontextprotocol/server-brave-search
```

:::message
MCPã‚µãƒ¼ãƒãƒ¼ã¯ä¸–ã®ä¸­ã«æº¢ã‚Œã‹ãˆã£ã¦ã„ã¾ã™ãŒã€ãƒ„ãƒ¼ãƒ«ãƒã‚¤ã‚ºãƒ‹ãƒ³ã‚°ãªã©ã®å±é™ºæ€§ã‚‚ã‚ã‚Šä¿¡ç”¨ã§ããªã„MCPã‚µãƒ¼ãƒãƒ¼ã¯ä½¿ç”¨ã—ãªã„æ–¹ãŒã„ã„ã§ã™ã€‚ä»Šå›ä½¿ç”¨ã—ãŸContext7ã¨Brave-Searchã¯å…±ã«[Anthropicã®å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](https://github.com/modelcontextprotocol/servers)ã«å«ã¾ã‚Œã¦ã„ã‚‹ã‚µãƒ¼ãƒãƒ¼ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒï¼ˆBrave-Searchã¯Archiveã•ã‚ŒãŸï¼‰ã€è‡ªå·±åˆ¤æ–­ã§ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚

MCPã‚µãƒ¼ãƒãƒ¼ã«ã¤ã„ã¦æ°—ã‚’ã¤ã‘ã‚‹ã“ã¨ã¯ã€ä»¥ä¸‹ã®Zennè¨˜äº‹ãŒå‚è€ƒã«ãªã‚Šã¾ã™ã€‚
https://zenn.dev/sun_asterisk/articles/mcp_security_risk
:::

## Claude Code subagent (ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ)

**subagentã¯Claude Codeã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å­˜åœ¨ã—ã¦ã„ã‚‹æ©Ÿèƒ½ã§ã™ã€‚**

æ„å¤–ã¨çŸ¥ã‚‰ãªã„äººã‚‚å¤šã„ã¨æ€ã„ã¾ã™ãŒã€`Task`ã§è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¯subagentãŒå®Ÿè¡Œã—ã¦ã„ã¾ã™ã€‚Web Fetchã‚„Readã¯ç©æ¥µçš„ã«subagentã‚’ä½¿ã£ã¦ã„ã‚‹å°è±¡ã§ã™ã€‚

Claude Codeã®subagentã¯[Anthropicå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://www.anthropic.com/engineering/claude-code-best-practices)ã«ã‚‚æ˜è¨˜ã•ã‚Œã¦ã„ã¾ã™ã€‚ä»¥ä¸‹å¼•ç”¨ï¼š

> This is the part of the workflow where you should consider strong use of **subagents**, especially for complex problems. Telling Claude to use **subagents** to verify details or investigate particular questions it might have, especially early on in a conversation or task, tends to preserve context availability without much downside in terms of lost efficiency.

ã“ã“ã§ã¯**Fileã®Readãªã©ã®åˆ†å‰²ã‚¿ã‚¹ã‚¯ã¯ã€subagentã‚’ä½¿ã†ã“ã¨æ¨å¥¨ã™ã‚‹**ã¨ã„ã†ã“ã¨ã‚’ä¼ãˆã¦ã„ã¾ã™ã€‚ä½¿ã„æ–¹ã¯"use subagent"ã¨æ˜è¨˜ã—ã¦ãã‚Œã‚Œã°ã€subagentã«ã‚¿ã‚¹ã‚¯ã‚’æŒ¯ã£ã¦ãã‚Œã‚‹ã®ãŒè‰¯ã„ã§ã™ã€‚

Claude Codeã§èµ·å‹•ã—ãŸsubagentã¯ä»¥ä¸‹ã®ã‚ˆã†ãªç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€‚

- è»½é‡
- ä¸¦åˆ—èµ·å‹•å¯èƒ½
- è¦ªagentã§ä½¿ç”¨å¯èƒ½ãªãƒ„ãƒ¼ãƒ«ã‚’ä½¿ãˆã‚‹
- subagentã¯ç‹¬è‡ªã®Context Windowã‚’æŒã¤
- å˜ç‹¬ã®ã‚¿ã‚¹ã‚¯ã§å‹•ä½œã—å®Œäº†ã™ã‚‹ã¨è§£æ”¾ã•ã‚Œã‚‹

ã¤ã¾ã‚Šã€**è¦ªagentãŒsubagentã«ã‚¿ã‚¹ã‚¯ã‚’ä¸ãˆã¦å®Ÿè¡Œã—ã¦ã‚‚ã‚‰ã†ã“ã¨ãŒã§ãã¾ã™**ã€‚

subagentã‚’è¤‡æ•°ä½¿ã†ã“ã¨ã§ã‚¿ã‚¹ã‚¯ã‚’ä¸¦åˆ—å®Ÿè¡Œã§ãã‚‹ã“ã¨ã‚‚å¼·ã¿ã§ã™ã€‚Anthropicã®[How we built our multi-agent research system](https://www.anthropic.com/engineering/built-multi-agent-research-system)ã®ä¸­ã§ã‚‚ã€Claudeã®Deep Researchã«ã¯multiple-subagentãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒè¨€åŠã•ã‚Œã¦ã„ã¾ã™ã€‚

![The multi-agent architecture in action: user queries flow through a lead agent that creates specialized subagents to search for different aspects in parallel](https://storage.googleapis.com/zenn-user-upload/3169df8ba2c6-20250614.png)


ä»Šå›ã¯subagentã«ï¼’ç¨®é¡ã®MCPã‚µãƒ¼ãƒãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã‚‚ã‚‰ã†ã“ã¨ã§ã€Claude Codeå†…ã§ã®ç°¡æ˜“çš„ãªsubagentæ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ ã‚’è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚

## Claude Codeã®subagentã«ï¼’ã¤ã®MCPã‚µãƒ¼ãƒãƒ¼ã‚’ä½¿ã‚ã›ã‚‹

### subagentã‚’ä½¿ç”¨ã—ãªã„ã‚±ãƒ¼ã‚¹

![](https://storage.googleapis.com/zenn-user-upload/9e819dc2c108-20250613.png =500x)

**ã¾ãšã¯subagentã®ä½¿ç”¨ã‚’æ˜ç¤ºçš„ã«æŒ‡å®šã—ã¦ã„ãªã„ã‚±ãƒ¼ã‚¹ã§ã™**ã€‚

ç”»åƒã‹ã‚‰ã‚ã‹ã‚‹ã‚ˆã†ã«ã€Context7ã¨Brave-Searchã®MCPã‚µãƒ¼ãƒãƒ¼ãŒå‘¼ã°ã‚Œã¦ã„ã¾ã™ã€‚

ã“ã®æ™‚ã€`CLAUDE.md`ã«ä»¥ä¸‹ã®ã‚ˆã†ãªæ–‡è¨€ã‚’å…¥ã‚Œã¦ã„ã¾ã—ãŸã€‚

**CLAUDE.mdï¼š**
```md
- You can use web search including `use brave-search` MCP to search the latest solution.
- You should check the latest Next.js, Node.js, and other libraries with `use context7` MCP.
```

ä»Šå›ã¯Next.js 15ã®Hydration errorã‚’è©¦ã—ã«ç›´ã—ã¦ã‚‚ã‚‰ã£ã¦ã„ã¾ã™ã€‚Claude Codeå˜ç‹¬ã§ã¯ä¸Šæ‰‹ãç›´ã›ãªã‹ã£ãŸå•é¡Œã§ã™ãŒã€ã“ã®ä¾‹ã§ã¯æ¤œç´¢ã‹ã‚‰ä¸Šæ‰‹ãNext.js 15ã¨MaterialUIã®å•é¡Œã‚’èª¿ã¹ã¦ãã¦ç›´ã—ã¦ãã‚Œã¾ã—ãŸã€‚

subagentã‚’ä½¿ç”¨ã—ãªã„å ´åˆã®ãƒ¡ãƒªãƒƒãƒˆã¯ã€**Claude Codeã®ContextãŒå®Œå…¨ã«å¼•ãç¶™ãŒã‚ŒãŸçŠ¶æ…‹ã§å•é¡Œè§£æ±ºæ–¹æ³•ã‚’èª¿ã¹ã‚‹ã“ã¨**ã ã¨æ€ã„ã¾ã™ã€‚

ä¸€æ–¹ã§ã€èª¿æŸ»ã®ãŸã‚ã«MCPã‚µãƒ¼ãƒãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€**é€šå¸¸ã‚ˆã‚Šã‚‚Context windowã‚’åœ§è¿«ã—ã¦ã„ã‚‹å°è±¡ã‚’å—ã‘ã¾ã—ãŸ**ã€‚ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆã«åˆ°é”ã™ã‚‹ã¾ã§ãŒä½“æ„Ÿçš„ã«æ—©ã‹ã£ãŸã§ã™

### subagentã®ä½¿ç”¨ã™ã‚‹ã‚±ãƒ¼ã‚¹

![](https://storage.googleapis.com/zenn-user-upload/c0f0ed71d7bc-20250613.png)

subagentã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«"**use subagentï¼ˆã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½¿ã£ã¦ï¼‰**"ãªã©ã®æ–‡è¨€ã‚’å…¥ã‚Œã¾ã™ã€‚"**multiple subagent**"ã‚’æŒ‡å®šã™ã‚‹ã¨è¤‡æ•°subagentã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼ˆTaskï¼‰ã‚’ç«‹ã¡ä¸Šã’ã¦ãã‚Œã¾ã™ã€‚

ä¸Šè¨˜ã®ç”»åƒã§ã‚‚ã€multiple subagentãŒãã‚Œãã‚Œ`Context7`ã¨`Brave-Search`ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚ï¼ˆãªãœã‹ã‚‚ã†ä¸€ã¤subagentãŒç«‹ã¡ä¸ŠãŒã£ã¦ã„ã¾ã™ãŒï¼‰

subagentã‚’ä½¿ç”¨ã™ã‚‹åˆ©ç‚¹ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è€ƒãˆã¦ã„ã¾ã™ã€‚

- **ä¸¦åˆ—å‡¦ç†ã«ã‚ˆã‚‹æƒ…å ±åœ§ç¸®**
- **AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®é–¢å¿ƒã®åˆ†é›¢**
- **è¦ªClaude Codeã®Context Windowã‚’åœ§è¿«ã—ãªã„**

ä¸€æ–¹ã§ã€è¦ªClaude Codeã®Contextã®subagentã¸ã®å…±æœ‰ã¯æœ€å°é™ã®ã‚ˆã†ã«è¦‹ãˆãŸãŸã‚ã€æœŸå¾…ã—ãŸæ¤œç´¢çµæœã‚’è¿”ã—ã¦ã“ãªã„ã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚

### Claude Codeã§MCPã‚µãƒ¼ãƒãƒ¼ã‚’ä½¿ã†ãƒ¡ãƒªãƒƒãƒˆãƒ»ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ

Claude Codeã®å•é¡Œè§£æ±ºèƒ½åŠ›ã‚’MCPã‚µãƒ¼ãƒãƒ¼ã«ã‚ˆã‚‹æœ€æ–°æƒ…å ±ã«ã‚ˆã‚‹è£œå®Œã§è§£æ±ºã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã€å€‹äººçš„ã«æ„Ÿã˜ãŸãƒ¡ãƒªãƒƒãƒˆãƒ»ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚’è¨˜è¼‰ã—ã¾ã™ã€‚

**ãƒ¡ãƒªãƒƒãƒˆï¼ˆProsï¼‰**ï¼š
* å®Ÿè£…ãŒã¨ã¦ã‚‚ç°¡å˜
* RAGã‚·ã‚¹ãƒ†ãƒ ãŒä¸è¦
* AIã«æœ€æ–°æƒ…å ±ã‚’ä¸ãˆã‚‰ã‚Œã‚‹

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆï¼ˆConsï¼‰**ï¼š
* Contextã‚’åœ§è¿«ã™ã‚‹
* Tokenã‚’ãã‚Œãªã‚Šã«é£Ÿã†
* Claude CodeãŒMCPã‚µãƒ¼ãƒãƒ¼ã‚’ä½¿ã†ã®ãŒä¸‹æ‰‹

ç§ã®ã‚±ãƒ¼ã‚¹ã§ã¯MCPã‚µãƒ¼ãƒãƒ¼ã«ã‚ˆã‚‹æœ€æ–°æƒ…å ±ã®å–å¾—ã¯åŠ¹æœãŒã‚ã‚Šã¾ã—ãŸãŒã€ç”ŸæˆAIã‚†ãˆã«ã‚ã‚‹ç¨‹åº¦ã¯å‡ºåŠ›ã‚¬ãƒãƒ£ã®è¦ç´ ãŒã‚ã‚Šã¾ã™ã€‚**ã‚³ãƒ¼ãƒ‰ã‚¬ãƒãƒ£ã®æ’å‡ºç¢ºç‡ã‚’ä¸Šã’ã‚‹ãŸã‚ã«ã€MCPã‚µãƒ¼ãƒãƒ¼ã‚’ä½¿ã†ã‚ˆã†ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã‚ã‚Œã°å•é¡Œãªã„ã¨æ€ã„ã¾ã™**ã€‚

ã¾ãŸsubagentã«ã‚¿ã‚¹ã‚¯ã‚’ä¾é ¼ã™ã‚‹ã“ã¨ã§ã€MCPã‚µãƒ¼ãƒãƒ¼ã‚’ä½¿ã†ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚’ã‚ã‚‹ç¨‹åº¦è»½æ¸›ã§ãã‚‹ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚

## å¿œç”¨ï¼šã‚«ã‚¹ã‚¿ãƒ ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã§ãƒã‚°è§£æ±ºã‚’ã™ãã«ãŠé¡˜ã„ã™ã‚‹

å®Ÿã¯ã„ã¡ã„ã¡`use subagent`ã¨ã‹`use Context7`ã‚’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå†…ã§æŒ‡ç¤ºã™ã‚‹ã®ãŒé¢å€’ã§ã™ã€‚

å€‹äººçš„ã«**ã‚«ã‚¹ã‚¿ãƒ ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã§ãƒã‚°è§£æ±ºã®ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä»•è¾¼ã‚€ã®ãŒãŠã™ã™ã‚**ã§ã™ã€‚

è¨­å®šã¯ã¨ã¦ã‚‚ç°¡å˜ã§ã€ä»¥ä¸‹ã®ãƒ•ã‚©ãƒ«ãƒ€ã«Commandç”¨ã®Markdownãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ãã ã‘ã§ã§ãã¾ã™ã€‚

MacOSã®å ´åˆï¼š
- globalè¨­å®šï¼š`~/.claude/commands/` (command prefix=`/user:`)
- projectã”ã¨ã®è¨­å®šï¼š`<project root>/.claude/commands/` (command prefix=`/project:`

:::message
(2025/06/18è¿½è¨˜)
Claude Code version 1.0.25ã‹ã‚‰prefixã§ã¯ãªãdescriptionã«`(user)`, `(project)`ã¨æ›¸ã‹ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ä»Šå›ã®ã‚±ãƒ¼ã‚¹ã§ã¯`/bugfix $ARGUMENTS`ã§å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
:::

ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ãªbugfix.mdã‚’globalè¨­å®šã¨ã—ã¦ä½¿ã†ã¨ã—ã¾ã™ã€‚

`~/.claude/commands/bugfix.md`
```md
Fix bug from user provided bug description: $ARGUMENTS

1. Understand the bug description and think the root cause. Try to recreate the issue.
2. Fix the issue. Use `context7` and `brave-search` MCP tools to understand the error. 
These MCP tool searching should be done by multiple subagents. Also use native Web search subagent for issue investigation.
3. If there is another error, always repeat this debugging process from 1 to 2.
```

ä¸€åº¦Commandç”¨Markdownãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ã‘ã°ã€Claude Codeã®ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã¨ã—ã¦ç¾ã‚Œã¾ã—ãŸã€‚

![](https://storage.googleapis.com/zenn-user-upload/4999ee680c43-20250613.png)

ä»Šå›ã¯`$ARGUMENTS`ã‚‚è¨­å®šã—ã¦ã„ã‚‹ã®ã§å¼•æ•°ã‚’å–ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä½¿ã„æ–¹ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã™ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯ä¾‹ã§å®Ÿéš›ã¯è‹±èªã§ã‚‚ã†å°‘ã—è©³ã—ãæ›¸ã„ã¦ã¾ã™ï¼‰ã€‚

```bash
/user:bugfix Next.jsã®Hydrationã‚¨ãƒ©ãƒ¼ãŒã‚ã‚‹ã®ã§ä¿®æ­£ã—ã¦ã€‚
```

ã“ã‚Œã«ã‚ˆã‚ŠClaude Codeã¯ä»¥ä¸‹ã®ã‚ˆã†ãªç†è§£ã‚’æœ€åˆã«ã—ã¦ãã‚Œã¾ã—ãŸã€‚

![](https://storage.googleapis.com/zenn-user-upload/b38f525fc6be-20250613.png)

ç”»åƒã‹ã‚‰ã‚ã‹ã‚‹ã‚ˆã†ã«ã€ã“ã¡ã‚‰ãŒè¨­å®šã—ãŸå®Ÿè¡Œã‚¹ãƒ†ãƒƒãƒ—1ã€œ3ã‚’ç†è§£ã—ã¦ToDoã®æº–å‚™ã‚’ã—ã¦ãã‚Œã¦ã„ã¾ã™ã€‚

ä»Šå›ã®ã‚ˆã†ã«ã€Multiple-subagentã«MCPã‚µãƒ¼ãƒãƒ¼ã‚’ãã‚Œãã‚Œä½¿ã£ã¦ã‚‚ã‚‰ã†ã‚ˆã†ãªæŒ‡ç¤ºã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã«ã€ã‚«ã‚¹ã‚¿ãƒ ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰åŒ–ã—ã¦ãŠãã®ã¯æœ‰åŠ¹ã ã¨æ€ã„ã¾ã™ã€‚

## ã¾ã¨ã‚

ã“ã®è¨˜äº‹ã§ã¯Claude CodeãŒæœ€æ–°ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæƒ…å ±ã‚’æŒã£ã¦ã„ãªã„å•é¡Œã‚’ã€MCPã‚µãƒ¼ãƒãƒ¼ + subagentsã‚’ä½¿ã£ã¦è§£æ±ºã—ã‚ˆã†ã¨ã—ã¾ã—ãŸã€‚

ä»Šå›ã¯æ¤œç´¢é–¢ä¿‚ã®MCPã‚µãƒ¼ãƒãƒ¼ã‚’ãƒ¡ã‚¤ãƒ³ã§ä½¿ç”¨ã—ã¾ã—ãŸãŒã€**filesystemsã‚„æµè¡Œã‚Šã®Obsidianã®MCPã‚µãƒ¼ãƒãƒ¼ã‚’ä½¿ã£ã¦æ‰‹æŒã¡ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’Readã•ã›ã‚‹ã®ã‚‚æœ‰åŠ¹ã ã¨æ€ã„ã¾ã™**ã€‚æ¤œç´¢ç³»MCPã‚µãƒ¼ãƒãƒ¼ã‚‚tavilyãªã©ãŒã‚ã‚‹ã®ã§ã€ãã¡ã‚‰ã‚‚è©¦ã™ã¨ã„ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚Claude Codeã¯ã¾ã MCPã‚µãƒ¼ãƒãƒ¼ã‚’ä¸Šæ‰‹ãä½¿ãˆã¦ã„ã‚‹å°è±¡ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ä»Šå¾ŒMCPã‚µãƒ¼ãƒãƒ¼ã¯çŸ¥ã£ã¦ãŠãã¹ãæŠ€è¡“ã®1ã¤ã ã¨æ€ã†ã®ã§è‰²ã€…è©¦ã›ã‚‹ã¨ã„ã„ã§ã™ã­ã€‚

**Claudeã®subagentä¸¦åˆ—åŒ–ã¯æœ€è¿‘ç ”ç©¶ãŒç››ã‚“ãªåˆ†é‡**ãªã®ã§ã‚¦ã‚©ãƒƒãƒã—ã¦ãŠãã¨ã„ã„ã¨æ€ã„ã¾ã™ã€‚ä»Šå›ã¯Claude Codeå†…ã§ç°¡æ˜“çš„ãªmultiple-subagentsã«ã‚ˆã‚‹æ¤œç´¢ã‚’è¡Œã„ã¾ã—ãŸãŒã€ãã®ã†ã¡å…¬å¼ã§ã“ã®æ©Ÿèƒ½ãŒã•ã‚‰ã«ä½¿ã„ã‚„ã™ãæä¾›ã•ã‚Œã‚‹æ°—ãŒã—ã¦ã„ã¾ã™ã€‚

ã“ã®è¨˜äº‹ãŒå‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚

## ğ•ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã‚Œã‚‹ã¨å¬‰ã—ã„ã§ã™ï¼

[ğ•ã§ã‚‚æƒ…å ±ç™ºä¿¡ã—ã¦ã„ã‚‹ã®ã§ã‚ˆã‹ã£ãŸã‚‰ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã‚Œã‚‹ã¨ã€ã¨ã¦ã‚‚åŠ±ã¿ã«ãªã‚Šã¾ã™ï¼ï¼](https://x.com/gaishi_narou)

![](https://storage.googleapis.com/zenn-user-upload/717f1c0df16f-20250613.png =500x)

## å‚è€ƒæ–‡çŒ®

https://www.anthropic.com/engineering/claude-code-best-practices

https://www.anthropic.com/engineering/built-multi-agent-research-system

https://modelcontextprotocol.io/introduction

https://www.reddit.com/r/ClaudeAI/comments/1l3gouj/share_your_claude_code_commands/#:~:text=This%20is%20my%20generic%20message,I%20want%20it%20to%20fix

https://claudelog.com/mechanics/task-agent-tools/

https://context7.com/

https://github.com/upstash/context7

https://gitub.com/modelcontextprotocol/servers-archived/tree/main/src/brave-search

